<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>每日问题</title>
    <style>
body {
    background-color: black;
}
h1, div {
    color: white;
    text-align: center;
    padding: 10px;
}
input {
    background-color: black;
    color: white;
    border: 2px gray dotted;
    width: 75%;
}
a:link, a:visited {
    color: lightblue;
    text-decoration: underline;
}
a:hover, a:active {
    color: white;
    text-decoration: underline;
}
#about {
    color: gray;
    position: fixed;
    bottom: 5px;
    left: 5px;
    right: 5px;
    animation: body_visible 0.5s ease 1.7s backwards;
}
#question_title {
    white-space: nowrap;
    text-overflow: clip;
    animation: title_scale 1s ease-out;
}
#question_usage {
    animation: body_visible 0.5s ease 0.7s backwards;
}
#question_body, #question_answer {
    animation: body_visible 0.5s ease 1.5s backwards;
}
#question_success {
    animation: body_visible 0.5s;
}
@keyframes title_scale {
    from {letter-spacing: 20px}
    to {letter-spacing: 0px}
}
@keyframes body_visible {
    from {opacity: 0}
    to {opacity: 1}
}
    </style>
    <script>
/*
别以为看到这儿就可以作弊了，这里的答案可都是正则表达式
如果你有能力看懂正则表达式，区区命令又有何难？
*/
var question_list = [{
    question: "如何检测最近玩家是否携带了命令方块？",
    answer: "clear\\s+@p\\s+command_block\\s+(-1|\\d+)\\s+0"
}, {
    question: "如何清除所有生存模式玩家携带的TNT？",
    answer: "clear\\s+@a\\[m=(survival|s|0)\\]\\s+tnt"
}, {
    question: "如何复制(1,3,5)-(2,4,6)区域内所有的非空气方块到(-1,-9,-5)?",
    answer: "clone\\s+1\\s+3\\s+5\\s+2\\s+4\\s+6\\s+-1\\s+-9\\s+-5\\s+masked(\\s+(normal|force)?)?"
}, {
    question: "如何复制(7,17,2)-(9,18,3)区域内所有的泥土方块到当前位置？",
    answer: "clone\\s+7\\s+17\\s+2\\s+9\\s+18\\s+3\\s+~\\s*~\\s*~\\s+filtered\\s+(normal|force)\\s+dirt(\\s+(0)?)?"
}, {
    question: "如何给予最近玩家无敌效果10秒？",
    answer: "effect\\s+@p\\s+resistance\\s+10\\s+([1-9]\\d+|[5-9])(\\s+(true|false)?)?"
}, {
    question: "如何给予所有玩家徒手攻击其他实体无伤的效果1分钟？",
    answer: "effect\\s+@a\\s+weakness\\s+60(\\s+([1-9]\\d*(\\s+(true|false)?)?)?)?"
}, {
    question: "如何给予所有等级大于50级的玩家50s隐身效果且隐藏粒子？",
    answer: "effect\\s+@a\\[lm=50\\]\\s+invisibility\\s+50\\s+([1-9]\\d*)\\s+true"
}, {
    question: "如何检测最近玩家手持物品是否是钓鱼竿？（钓鱼竿已被附魔为饵钓I）",
    answer: "enchant\\s+@p\\s+lure(\\s+(1)?)?"
}, {
    question: "如何杀死所有站在岩浆块上的玩家？",
    answer: "execute\\s+@a\\s+~\\s*~\\s*~\\s+detect\\s+~\\s*~-1\\s*~\\s+magma\\s+(-1|0)\\s+kill(\\s+(@s|@p)?)?"
}, {
    question: "如何将玩家A传送到玩家B前方两格？",
    answer: ""
}, {
    question: "如何给予以(5,31,2)为中心，50格范围内的所有玩家“雷罚”一次？",
    answer: ""
}, {
    question: "如何将(1,3,5)-(2,4,6)区域内所有的石头方块替换为空气？",
    answer: ""
}, {
    question: "如何将以命令执行点为中心，清空半径为5格的立方体内的所有方块并在六面覆盖上玻璃？",
    answer: ""
}, {
    question: "如何设置所有非生存模式玩家为生存模式？",
    answer: ""
}, {
    question: "如何把以(4,5,6)为中心，边长为5的正方体内的所有玩家变成生存模式？",
    answer: ""
}, {
    question: "如何防止玩家淹死？（不使用effect命令）",
    answer: ""
}, {
    question: "如何给予最近玩家一把在冒险模式下只能挖黑曜石的钻石镐？",
    answer: ""
}, {
    question: "如何清除所有非玩家实体？",
    answer: ""
}, {
    question: "如何使所有史莱姆在y坐标低于50时死亡？",
    answer: ""
}, {
    question: "如何在所有玩家耳边播放末影人死亡声？（每个玩家收到的音量相同）",
    answer: ""
}, {
    question: "如何替换位于(51,8,-56)的箱子内的第一格物品为苹果？",
    answer: "replaceitem\\s+block\\s+51\\s+8\\s+-56\\s+slot\\.container\\s+0\\s+apple"
}, {
    question: "如何替换最近玩家的主手物品为一块在冒险模式下只能放在草方块上的玻璃？",
    answer: ""
}, {
    question: "如何用命令让最近玩家戴上钻石头盔？",
    answer: "replaceitem\\s+entity\\s+@p\\s+slot\\.armor\\.head\\s+0\\s+diamond_helmet(\\s+\\d*)?"
}, {
    question: "如何将所有玩家传送到以(17,?,5)为中心，半径为20的区域？",
    answer: ""
}, {
    question: "如何在最近玩家的快捷栏上方显示“Hello”？",
    answer: "title\\s+@p\\s+actionbar\\s+Hello"
}, {
    question: "如何让下次标题瞬间显示，持续1s后瞬间消失？",
    answer: "title\\s+(\\S+)\\s+times\\s+0\\s+20\\s+0"
}, {
    question: "如何让一个名称为A的盔甲架不断旋转？",
    answer: ""
}, {
    question: "如何把以(7,8,9)为顶点，第五卦限方向里边长为6的正方体里的所有生物传送到(0,4,0)？（不懂什么叫卦限的自己百度）",
    answer: ""
}, {
    question: "如何让玩家等级不超过100级？（使用xp与execute命令）",
    answer: ""
}];
(function() {
var i, j, seed = [question_list.length];
var charcode = new Array(question_list.length);
for (i = 0; i < charcode.length; i++) {
    question_list[i].index = i;
    charcode[i] = random(seed);
}
question_list.sort(function(a, b) {
    return charcode[a.index] - charcode[b.index];
});
var date = Date.now();
var cur = getDailyQuestion(date);
window.onload = function() {
    var body_node = document.getElementById("question_body");
    var about_node = document.getElementById("about");
    var answer_node = document.getElementById("question_answer");
    var input_node = document.getElementById("answer_box");
    var success_node = document.getElementById("question_success");
    body_node.innerHTML = cur.question;
    about_node.innerHTML = "下次更新问题于" + toChineseDateTime(getNextUpdateTime()) + "<br />题库大小:" + question_list.length + "<br />命令助手讨论区 @ ProjectXero";
    if (window.localStorage && Number(window.localStorage.lastExpired) > Date.now()) {
        input_node.value = window.localStorage.lastInput;
    }
    answer_node.style = "";
    success_node.style = "display: none";
    success_node.innerHTML = "";
}
window.onresize = function() {
    var about_node = document.getElementById("about");
    if (window.innerHeight < document.body.offsetHeight + about_node.offsetHeight) {
        about_node.style = "display: none";
    } else {
        about_node.style = "animation: none";
    }
}
window.prevDay = function() {
    date -= 86400000;
    cur = getDailyQuestion(date);
    window.onload();
}
window.nextDay = function() {
    date += 86400000;
    cur = getDailyQuestion(date);
    window.onload();
}
function random(seed) {
    return ((seed[0] = seed[0] * 9301 + 49297) % 233280) / 233280;
}
function getDailyQuestion(time) {
    var seed = [Math.floor(Math.abs(time / 86400000))];
    random(seed);
    var r = random(seed);
    getDailyQuestion.code = fixZero(Math.floor(r * 1000000).toString(), 6);
    return question_list[getDailyQuestion.index = Math.floor(time / 86400000) % question_list.length];
}
function getNextUpdateTime() {
    return new Date(Math.ceil(date / 86400000) * 86400000);
}
function toChineseDateTime(date) {
    return date.getFullYear() + "年" + (date.getMonth() + 1) + "月" + date.getDate() + "日 " + fixZero(date.getHours(), 2) + ":" + fixZero(date.getMinutes(), 2) + ":" + fixZero(date.getSeconds(), 2);
}
function fixZero(s, n) {
    s = String(s);
    return n > s.length ? fixZero("0" + s, n) : s;
}
function success_action() {
    var answer_node = document.getElementById("question_answer");
    var success_node = document.getElementById("question_success");
    success_node.innerHTML = "祝贺你！你答对了！<br />代码为：" + getDailyQuestion.code + '<br /><br />如果你希望你的题目出现在题库里，您可以加群<a target="_blank" href="http://shang.qq.com/wpa/qunwpa?idkey=d41f5861724c0694d880ae9f3a2b7db8d5f58a94314f57a816c97114c9257b64">MCPE命令助手讨论区</a>';
    success_node.style = "";
    answer_node.style = "display: none";
}
window.checkAnswer = function(answer) {
    if (answer != null) {
        var v = answer.value, t;
        v = v.replace(/^\//, "");
        if (window.localStorage) {
            window.localStorage.lastInput = answer.value;
            window.localStorage.lastExpired = getNextUpdateTime().getTime();
        }
        if (cur.answer instanceof Function) {
            if (cur.answer(v)) success_action();
        } else {
            if (t = new RegExp(cur.answer, "").exec(answer.value)) {
                if (t[0].length != v.length) return;
                success_action();
            }
        }
        
    }
}
})();
    </script>
</head>
<body>
<h1 id="question_title">每 日 问 题</h1>
<div id="question_usage">请使用一句命令来解答以下问题</div>
<div id="question_body"></div>
<div id="question_answer">
请填写你的答案<br />
<input type="text" id="answer_box" onchange="checkAnswer(this)"></input>
</div>
<div id="question_success"></div>
<div id="about"></div>
</body>
</html>